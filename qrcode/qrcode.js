~function(){new function(){var a="";a+='		<div id="bookmark-qrcode-img" class="img"></div>';a+='		<div class="input">';a+='			<textarea id="bookmark-qrcode-input"></textarea>';a+='			<button class="create" type="button" id="bookmark-qrcode-create">\u751F\u6210\u4E8C\u7EF4\u7801</button> <button class="close" type="button" id="bookmark-qrcode-close">\u5173\u95ED</button>';a+='			<p><a href="http://ma.taobao.com/">http://ma.taobao.com/</a></p>';a+="		</div>",URL="http://ma.taobao.com/api/qrcode.html?activity=encode&text={text}&width=180&height=180&ecLevel=L&characterSet=gbk&t={t}";var b=this,c=function(d){return document.getElementById(d)};this.render=function(){var d=c("bookmark-qrcode");if(!d){d=b.create();b.addStyleSheet();c("bookmark-qrcode-create").onclick=function(){b.createQR(c("bookmark-qrcode-input").value)};c("bookmark-qrcode-close").onclick=function(){document.body.removeChild(d)}}else{d.style.display="block"}b.createQR(location.href);c("bookmark-qrcode-input").value=location.href};this.addStyleSheet=function(){var f,g="bookmark-qrcode-stylesheet";var e=".bookmark-qrcode *{margin:0;padding:0;}.bookmark-qrcode{position:absolute;z-index:9999;top:10px;left:50%;margin-left:-200px;width:400px;background:#fff;border:8px solid #ffc40d;}.bookmark-qrcode .img,.bookmark-qrcode .input{float:left;padding:10px;}.bookmark-qrcode .img{width:180px;height:180px;}.bookmark-qrcode .img img{display:block;width:180px;height:180px;}.bookmark-qrcode .input{width:180px;height:200px;background:#ffc40d;padding:0 10px;}.bookmark-qrcode .input textarea{width:175px;height:120px;padding:5px;}.bookmark-qrcode .input button{padding:5px 10px;}.bookmark-qrcode .input a{display:block;font-size:12px;font-family:Arial,sans-serif;margin-top:10px;color:#fff;}";if(g&&(g=g.replace("#",""))){f=document.getElementById("#"+g)}if(f){return}f=document.createElement("style");f.id=g;var d=document.getElementsByTagName("head")[0];d.appendChild(f);if(f.styleSheet){f.styleSheet.cssText=e}else{f.appendChild(document.createTextNode(e))}};this.create=function(){var d=document.createElement("div");d.className="bookmark-qrcode";d.id="bookmark-qrcode";d.innerHTML=a;document.body.appendChild(d);return d};this.createQR=function(g){var f=URL.replace("{text}",encodeURI(g)).replace("{t}",Math.random()),d=document.createElement("img"),e=c("bookmark-qrcode-img");e.innerHTML="";d.src=f;e.appendChild(d)};b.render()}}();
